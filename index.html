<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="styles.css" rel="stylesheet" type="text/css" />
  <style>
    #content {
      width: 99%;
      height: auto;
      margin-top: 2px;
      margin-left: 2px;
      text-align: center;
      font-family: 'sysfont.otf';
      font-size: 16px;
    }

    /* dakedres was here ;3 (the creator put this here not me lmao) */

    iframe {
      width: 60vh;
      height: 34vh;
      display: flex;
      justify-content: center;
    }

    @media (max-width: 768px) {


      iframe {
        width: auto;
        max-height: 200px;
        margin: 10px;
      }

    }

    }
  </style>
</head>

<body>
  <div id="nav">
    <img src="images/nav/archiveIcon.png" onclick="location.href='archive.html'">

    <img src="images/nav/channelIcon.gif"
      onclick="window.open('https://https://www.youtube.com/@idkstudios_', '_blank')">

    <img src="images/nav/youIcon.png" onclick="location.href='you.html'">

    <img src="images/nav/radioIcon.png" onclick="location.href='radio.html'">
    <!-- 
    <img class="shopdefault-icon" src="images/nav/shopIcon.png" onclick="location.href='shop.html'"> -->

    <img src="images/nav/aboutIcon.png" onclick="location.href='about.html'">
  </div>

  <div id="main-container">
    <div id="main-container-style">
      <!-- box properties here -->
      <!-- header -->
      <div id="header">
        <div class="header-title">
          <img src="images/general/icons/tree.png" id="winicon">
        </div>

        <h1>home</h1>

        <div class="x">
          <!-- <img src="images/general/icons/xbutton.png" id="homeicon" onclick="location.href='index.html'"> -->
        </div>
      </div>
      <!-- black bar -->

      <div id="black-bar"></div>

      <!-- main box -->

      <div id="main-box">
        <div id="box-bg">
          <!-- !! PAGE CONTENT !! -->
          <div id="content">
            <p> we make anything and everything
            </p>

          </div>

          <div style="display: flex; justify-content: center; align-content:center;">
            <iframe id="youtube-iframe" width="420" height="315" src="https://www.youtube.com/embed/N-wZu6Q9aP8?"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen></iframe>
          </div>


          <h2 style="text-align: center; font-family: 'sysfont.otf';">news</h2>
          <div>

            <p class="news">------------------------------------------------</p>

            <!-- When adding new news elements, make sure to use '<p class="news"> [INSERT NEWS]' </p> -->
            <!-- Every single line should have a p tag !! -->
            <!-- targe=_blank means open in new tab -->
            <!-- images should have class=news -->



            <p class="news"> 1/12/24 "IDK MAG" VOL.0 has released! </p>
            <a href="https://www.instagram.com/p/C2AoKzarykX/?img_index=1" target=”_blank”>
              <img src="images/news/idkmagV0.png" class="news-image">
            </a>

            <p class="news">------------------------------------------------</p>

            <p class="news"> 1/1/24 - idkstudios.org
              has
              gotten a new look!</p>

            <p class="news">
              ------------------------------------------------</p>


            <p class="news"> 11/30/23 - maarrruu has released a new ep "If You're Still Listening"!</p>
            <a href="https://open.spotify.com/album/7rrdJtVq3e7b88EifkgyYu?si=N2czn2Y_QZeRaf8l_7iMXQ" target=”_blank”>
              <img src="images/news/melancholycover.jpg" class="news-image">
            </a>

            <p class="news">
              ------------------------------------------------</p>

            <p class="news"> 9/8/23 - the idk show
              pilot (ep
              0) has officially launched.</p>

            <p class="news">
              ------------------------------------------------</p>

            <p style="text-align: center; font-family: 'Internet.ttf'; padding-top: 2px; padding-top:40px;"> ~ site by
              <a href="https://billkawaka.com" target=”_blank”>@odiwr</a>
            </p>

          </div>
        </div>
      </div>
    </div>

    <div id="taskbar">
      <div class="start-box">
        <button class="start-button" onclick="location.href='index.html'">idk studios</button>
      </div>

      <div class="news-bar">
        <marquee behavior="scroll" direction="left">
          <div class="">
            Maarruu’s new EP “If you’re still listening” has released! &emsp; zugz’s new single “forHer” featuring Ahk
            Sair has released! &emsp; The IDK Show #0 Ft. IMAAD is out now! &emsp; IMAAD’s new single “tranCed”!
          </div>

        </marquee>
      </div>

      <!-- Add more buttons as needed -->
      <div class="system-tray-icons">
        <div class="system-tray-icon"><img src="images/taskbar/instagram.png"
            onclick="window.open('https://www.instagram.com/idkstudios_/', '_blank')">
        </div>
        <div class="system-tray-icon"><img src="images/taskbar/tiktok.png"
            onclick="window.open('https://www.tiktok.com/@idk.studioss', '_blank')">
        </div>
        <div class="system-tray-icon"><img src="images/taskbar/twitter.png"
            onclick="window.open('https://twitter.com/idkzugz?s=21&t=tu_387E8CI51JXNZHh9f0A', '_blank')">
        </div>
        <div class="system-tray-icon"><img src="images/taskbar/discord.png"
            onclick="window.open('https://discord.gg/YMzDKmxg4E', '_blank')">
        </div>
        <div class="system-tray-icon"><img src="images/taskbar/tumblr.png"
            onclick="window.open('https://idk-studios.tumblr.com/', '_blank')">
        </div>
        <div class="system-tray-icon"><img src="images/taskbar/patreon.png"
            onclick="window.open('https://www.patreon.com/idkstudios_', '_blank')">
        </div>
      </div>
    </div>

    <script>
      // Set the time limit (in milliseconds) for considering the user as AFK
      const afkTimeLimit = 480000; // 8 minutes
      let afkTimer;
      let audioPlaying = false;

      // Elements to show/hide when AFK
      const elementsToHide = document.querySelectorAll('body > *');
      const overlay = document.createElement('div');
      overlay.style.position = 'fixed';
      overlay.style.top = '0';
      overlay.style.left = '0';
      overlay.style.width = '100%';
      overlay.style.height = '100%';
      overlay.style.backgroundColor = 'rgba(255, 255, 255)'; // Semi-transparent white
      overlay.style.display = 'none';
      overlay.style.zIndex = '9998';

      const afkMessage = document.createElement('div');
      afkMessage.innerText = 'Are you still here? :(';
      afkMessage.style.position = 'fixed';
      afkMessage.style.top = '50%';
      afkMessage.style.left = '50%';
      afkMessage.style.transform = 'translate(-50%, -50%)';
      afkMessage.style.color = 'black';
      afkMessage.style.fontSize = '14px';
      afkMessage.style.zIndex = '9999';
      afkMessage.style.display = 'none';
      afkMessage.style.backgroundColor = 'transparent';

      // Function to reset the timer and hide the AFK message and overlay
      function resetAfkTimer() {
        clearTimeout(afkTimer);
        afkTimer = setTimeout(() => {
          if (!audioPlaying) {
            overlay.style.display = 'block';
            afkMessage.style.display = 'block';
          }
        }, afkTimeLimit);
        hideAfkMessage();
      }

      // Function to hide the AFK message and overlay
      function hideAfkMessage() {
        overlay.style.display = 'none';
        afkMessage.style.display = 'none';
      }

      // Event listeners to reset the AFK timer
      window.addEventListener('mousemove', resetAfkTimer);
      window.addEventListener('keypress', resetAfkTimer);

      // Initialize the AFK timer
      resetAfkTimer();

      // Function to handle returning from AFK
      function returnFromAfk() {
        hideAfkMessage();
        clearTimeout(afkTimer);
        afkTimer = setTimeout(() => {
          if (!audioPlaying) {
            overlay.style.display = 'block';
            afkMessage.style.display = 'block';
          }
        }, afkTimeLimit);
      }

      // Event listener for clicks on the screen to return from AFK
      document.addEventListener('click', returnFromAfk);

      // Check if audio is playing on the page
      function checkForAudioPlaying() {
        const mediaElements = document.querySelectorAll('audio, video');
        for (const mediaElement of mediaElements) {
          if (!mediaElement.paused) {
            audioPlaying = true;
            return;
          }
        }
        audioPlaying = false;
      }

      // Check for audio playing every second
      setInterval(checkForAudioPlaying, 1000);

      // Append the overlay and AFK message to the body
      document.body.appendChild(overlay);
      document.body.appendChild(afkMessage);

      // ------------------------------------------------------------------------------------------------------ 

      // Retrieve the latest video from the YouTube API
      function getLatestVideo() {
        // Your YouTube Data API request code here
        // Make an API call to retrieve the latest video from the "idkstudios" channel
        // Parse the response and extract the video ID

        const channelId = 'UCzSoLVZnzylRG6377i87eUA';
        const apiKey = 'AIzaSyDVUGVR4mtvbNrO0mpU-UTD-EMj56y7OoE';
        const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${channelId}&maxResults=1&order=date&type=video&key=${apiKey}`;

        fetch(url)
          .then(response => response.json())
          .then(data => {
            const videoId = data.items[0].id.videoId;
            const iframe = document.getElementById('youtube-iframe');
            iframe.src = `https://www.youtube.com/embed/${videoId}`;
          })
          .catch(error => {
            console.error('Error:', error);
          });
      }

      // Call the function to get the latest video when the page loads
      getLatestVideo();

      // ------------------------------------------------------------------------------------------------------
      // Get the Start button element
      const startButton = document.querySelector('.start-button');

      // Update the Start button text with the current time
      function updateStartTime() {
        const now = new Date();
        const hours = now.getHours().toString().padStart(2, '0');
        const minutes = now.getMinutes().toString().padStart(2, '0');
        const seconds = now.getSeconds().toString().padStart(2, '0');
        startButton.textContent = `${hours}:${minutes}:${seconds}`;
      }

      // Update the Start button text initially
      updateStartTime();

      // Update the Start button text every second
      setInterval(updateStartTime, 1000);

    </script>
</body>

</html>
